<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Labour Register | APMC</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,#0f9d58,#34a853);
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
}
.register-box{
    background:#fff;
    width:360px;
    padding:30px;
    border-radius:15px;
    box-shadow:0 15px 40px rgba(0,0,0,0.2);
    text-align:center;
}
.register-box img{
    width:80px;
    margin-bottom:10px;
}
.register-box h2{
    color:#0f9d58;
    margin:5px 0;
}
.register-box p{
    font-size:14px;
    color:#666;
}
.input-box{
    text-align:left;
    margin-bottom:15px;
}
.input-box label{
    font-size:13px;
}
.input-box input{
    width:100%;
    padding:12px;
    border-radius:8px;
    border:1px solid #ccc;
    margin-top:5px;
}
.input-box input:focus{
    border-color:#0f9d58;
    outline:none;
}
.register-btn{
    width:100%;
    padding:12px;
    background:#0f9d58;
    color:#fff;
    border:none;
    border-radius:8px;
    font-size:16px;
    cursor:pointer;
}
.register-btn:hover{
    background:#0b8043;
}
.extra{
    margin-top:15px;
    font-size:13px;
}
.extra a{
    color:#0f9d58;
    text-decoration:none;
    font-weight:bold;
}
.footer{
    margin-top:15px;
    font-size:12px;
    color:#999;
}
</style>
</head>

<body>

<div class="register-box">
    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png">
    <h2>Labour Register</h2>
    <p>APMC Junagadh</p>

    <div class="input-box">
        <label>Full Name</label>
        <input type="text" id="name" placeholder="Enter full name">
    </div>

    <div class="input-box">
        <label>Mobile Number</label>
        <input type="number" id="mobile" placeholder="Enter mobile number">
    </div>

    <div class="input-box">
        <label>Password</label>
        <input type="password" id="password" placeholder="Create password">
    </div>

    <button class="register-btn" onclick="register()">Register</button>

    <div class="extra">
        Already registered? <a href="login.html">Login</a>
    </div>

    <div class="footer">
        Â© 2025 APMC Junagadh
    </div>
</div>

<!-- ðŸ”¥ Firebase Register Script -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  databaseURL: "https://apmc-6eb31-default-rtdb.asia-southeast1.firebasedatabase.app/"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.register = function () {
    let name = document.getElementById("name").value;
    let mobile = document.getElementById("mobile").value;
    let password = document.getElementById("password").value;

    if(name=="" || mobile=="" || password==""){
        alert("All fields required");
        return;
    }

    const userRef = ref(db, "labours/" + mobile);

    get(userRef).then((snapshot)=>{
        if(snapshot.exists()){
            alert("Mobile already registered âŒ");
        }else{
            set(userRef,{
                name: name,
                password: password,
                status: "active"
            }).then(()=>{
                alert("Register Successful âœ…");
                window.location.href = "login.html";
            });
        }
    });
}
</script>

</body>
</html>